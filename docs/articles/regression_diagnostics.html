<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="olsrr">
<title>Collinearity Diagnostics, Model Fit &amp; Variable Contribution • olsrr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Collinearity Diagnostics, Model Fit &amp; Variable Contribution">
<meta property="og:description" content="olsrr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-inverse navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">olsrr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../index.html">Home</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-guides">Guides</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-guides">
    <a class="dropdown-item" href="../articles/intro.html">Intro</a>
    <a class="dropdown-item" href="../articles/residual_diagnostics.html">Residual Diagnostics</a>
    <a class="dropdown-item" href="../articles/influence_measures.html">Measures of Influence</a>
    <a class="dropdown-item" href="../articles/heteroskedasticity.html">Heteroskedasticity</a>
    <a class="dropdown-item" href="../articles/regression_diagnostics.html">Collinearity Diagnostics</a>
    <a class="dropdown-item" href="../articles/variable_selection.html">Variable Selection</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-reference">Reference</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-reference">
    <a class="dropdown-item" href="../reference/index.html">Functions</a>
    <a class="dropdown-item" href="../articles/reference-media.html">Media</a>
    <a class="dropdown-item" href="../news/index.html">News</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/rsquaredacademy/olsrr">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Collinearity Diagnostics, Model Fit &amp; Variable Contribution</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/rsquaredacademy/olsrr/blob/HEAD/vignettes/regression_diagnostics.Rmd" class="external-link"><code>vignettes/regression_diagnostics.Rmd</code></a></small>
      <div class="d-none name"><code>regression_diagnostics.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="collinearity-diagnostics">Collinearity Diagnostics<a class="anchor" aria-label="anchor" href="#collinearity-diagnostics"></a>
</h2>
<p>Collinearity implies two variables are near perfect linear
combinations of one another. Multicollinearity involves more than two
variables. In the presence of multicollinearity, regression estimates
are unstable and have high standard errors.</p>
<div class="section level3">
<h3 id="vif">VIF<a class="anchor" aria-label="anchor" href="#vif"></a>
</h3>
<p>Variance inflation factors measure the inflation in the variances of
the parameter estimates due to collinearities that exist among the
predictors. It is a measure of how much the variance of the estimated
regression coefficient <span class="math inline">\(\beta_{k}\)</span> is
“inflated” by the existence of correlation among the predictor variables
in the model. A VIF of 1 means that there is no correlation among the
kth predictor and the remaining predictor variables, and hence the
variance of <span class="math inline">\(\beta_{k}\)</span> is not
inflated at all. The general rule of thumb is that VIFs exceeding 4
warrant further investigation, while VIFs exceeding 10 are signs of
serious multicollinearity requiring correction.</p>
<p>Steps to calculate VIF:</p>
<ul>
<li>Regress the <span class="math inline">\(k^{th}\)</span> predictor on
rest of the predictors in the model.</li>
<li>Compute the <span class="math inline">\({R}^{2}_{k}\)</span>
</li>
</ul>
<p><span class="math display">\[VIF = \frac{1}{1 - {R}^{2}_{k}} =
\frac{1}{Tolerance}\]</span></p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">disp</span> <span class="op">+</span> <span class="va">hp</span> <span class="op">+</span> <span class="va">wt</span> <span class="op">+</span> <span class="va">qsec</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span>
<span class="fu"><a href="../reference/ols_coll_diag.html">ols_vif_tol</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##   Variables Tolerance      VIF</span>
<span class="co">## 1      disp 0.1252279 7.985439</span>
<span class="co">## 2        hp 0.1935450 5.166758</span>
<span class="co">## 3        wt 0.1445726 6.916942</span>
<span class="co">## 4      qsec 0.3191708 3.133119</span></code></pre>
</div>
<div class="section level3">
<h3 id="tolerance">Tolerance<a class="anchor" aria-label="anchor" href="#tolerance"></a>
</h3>
<p>Percent of variance in the predictor that cannot be accounted for by
other predictors.</p>
<p>Steps to calculate tolerance:</p>
<ul>
<li>Regress the <span class="math inline">\(k^{th}\)</span> predictor on
rest of the predictors in the model.</li>
<li>Compute the <span class="math inline">\({R}^{2}_{k}\)</span>
</li>
</ul>
<p><span class="math display">\[Tolerance = 1 - {R}^{2}_{k}\]</span></p>
</div>
<div class="section level3">
<h3 id="condition-index">Condition Index<a class="anchor" aria-label="anchor" href="#condition-index"></a>
</h3>
<p>Most multivariate statistical approaches involve decomposing a
correlation matrix into linear combinations of variables. The linear
combinations are chosen so that the first combination has the largest
possible variance (subject to some restrictions we won’t discuss), the
second combination has the next largest variance, subject to being
uncorrelated with the first, the third has the largest possible
variance, subject to being uncorrelated with the first and second, and
so forth. The variance of each of these linear combinations is called an
eigenvalue. Collinearity is spotted by finding 2 or more variables that
have large proportions of variance (.50 or more) that correspond to
large condition indices. A rule of thumb is to label as large those
condition indices in the range of 30 or larger.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">disp</span> <span class="op">+</span> <span class="va">hp</span> <span class="op">+</span> <span class="va">wt</span> <span class="op">+</span> <span class="va">qsec</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span>
<span class="fu"><a href="../reference/ols_coll_diag.html">ols_eigen_cindex</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##    Eigenvalue Condition Index   intercept        disp          hp           wt</span>
<span class="co">## 1 4.721487187        1.000000 0.000123237 0.001132468 0.001413094 0.0005253393</span>
<span class="co">## 2 0.216562203        4.669260 0.002617424 0.036811051 0.027751289 0.0002096014</span>
<span class="co">## 3 0.050416837        9.677242 0.001656551 0.120881424 0.392366164 0.0377028008</span>
<span class="co">## 4 0.010104757       21.616057 0.025805998 0.777260487 0.059594623 0.7017528428</span>
<span class="co">## 5 0.001429017       57.480524 0.969796790 0.063914571 0.518874831 0.2598094157</span>
<span class="co">##           qsec</span>
<span class="co">## 1 0.0001277169</span>
<span class="co">## 2 0.0046789491</span>
<span class="co">## 3 0.0001952599</span>
<span class="co">## 4 0.0024577686</span>
<span class="co">## 5 0.9925403056</span></code></pre>
</div>
<div class="section level3">
<h3 id="collinearity-diagnostics-1">Collinearity Diagnostics<a class="anchor" aria-label="anchor" href="#collinearity-diagnostics-1"></a>
</h3>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">disp</span> <span class="op">+</span> <span class="va">hp</span> <span class="op">+</span> <span class="va">wt</span> <span class="op">+</span> <span class="va">qsec</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span>
<span class="fu"><a href="../reference/ols_coll_diag.html">ols_coll_diag</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## Tolerance and Variance Inflation Factor</span>
<span class="co">## ---------------------------------------</span>
<span class="co">##   Variables Tolerance      VIF</span>
<span class="co">## 1      disp 0.1252279 7.985439</span>
<span class="co">## 2        hp 0.1935450 5.166758</span>
<span class="co">## 3        wt 0.1445726 6.916942</span>
<span class="co">## 4      qsec 0.3191708 3.133119</span>
<span class="co">## </span>
<span class="co">## </span>
<span class="co">## Eigenvalue and Condition Index</span>
<span class="co">## ------------------------------</span>
<span class="co">##    Eigenvalue Condition Index   intercept        disp          hp           wt</span>
<span class="co">## 1 4.721487187        1.000000 0.000123237 0.001132468 0.001413094 0.0005253393</span>
<span class="co">## 2 0.216562203        4.669260 0.002617424 0.036811051 0.027751289 0.0002096014</span>
<span class="co">## 3 0.050416837        9.677242 0.001656551 0.120881424 0.392366164 0.0377028008</span>
<span class="co">## 4 0.010104757       21.616057 0.025805998 0.777260487 0.059594623 0.7017528428</span>
<span class="co">## 5 0.001429017       57.480524 0.969796790 0.063914571 0.518874831 0.2598094157</span>
<span class="co">##           qsec</span>
<span class="co">## 1 0.0001277169</span>
<span class="co">## 2 0.0046789491</span>
<span class="co">## 3 0.0001952599</span>
<span class="co">## 4 0.0024577686</span>
<span class="co">## 5 0.9925403056</span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="model-fit-assessment">Model Fit Assessment<a class="anchor" aria-label="anchor" href="#model-fit-assessment"></a>
</h2>
<div class="section level3">
<h3 id="residual-fit-spread-plot">Residual Fit Spread Plot<a class="anchor" aria-label="anchor" href="#residual-fit-spread-plot"></a>
</h3>
<p>Plot to detect non-linearity, influential observations and outliers.
Consists of side-by-side quantile plots of the centered fit and the
residuals. It shows how much variation in the data is explained by the
fit and how much remains in the residuals. For inappropriate models, the
spread of the residuals in such a plot is often greater than the spread
of the centered fit.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">disp</span> <span class="op">+</span> <span class="va">hp</span> <span class="op">+</span> <span class="va">wt</span> <span class="op">+</span> <span class="va">qsec</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span>
<span class="fu"><a href="../reference/ols_plot_resid_fit_spread.html">ols_plot_resid_fit_spread</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></code></pre></div>
<p><img src="regression_diagnostics_files/figure-html/rfsplot-1.png" width="960" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="part-partial-correlations">Part &amp; Partial Correlations<a class="anchor" aria-label="anchor" href="#part-partial-correlations"></a>
</h3>
<div class="section level4">
<h4 id="correlations">Correlations<a class="anchor" aria-label="anchor" href="#correlations"></a>
</h4>
<p>Relative importance of independent variables in determining
<strong>Y</strong>. How much each variable uniquely contributes to <span class="math inline">\(R^{2}\)</span> over and above that which can be
accounted for by the other predictors.</p>
<div class="section level5">
<h5 id="zero-order">Zero Order<a class="anchor" aria-label="anchor" href="#zero-order"></a>
</h5>
<p>Pearson correlation coefficient between the dependent variable and
the independent variables.</p>
</div>
<div class="section level5">
<h5 id="part">Part<a class="anchor" aria-label="anchor" href="#part"></a>
</h5>
<p>Unique contribution of independent variables. How much <span class="math inline">\(R^{2}\)</span> will decrease if that variable is
removed from the model?</p>
</div>
<div class="section level5">
<h5 id="partial">Partial<a class="anchor" aria-label="anchor" href="#partial"></a>
</h5>
<p>How much of the variance in <strong>Y</strong>, which is not
estimated by the other independent variables in the model, is estimated
by the specific variable?</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">disp</span> <span class="op">+</span> <span class="va">hp</span> <span class="op">+</span> <span class="va">wt</span> <span class="op">+</span> <span class="va">qsec</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span>
<span class="fu"><a href="../reference/ols_correlations.html">ols_correlations</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##                Correlations                 </span>
<span class="co">## -------------------------------------------</span>
<span class="co">## Variable    Zero Order    Partial     Part  </span>
<span class="co">## -------------------------------------------</span>
<span class="co">## disp            -0.848      0.048     0.019 </span>
<span class="co">## hp              -0.776     -0.224    -0.093 </span>
<span class="co">## wt              -0.868     -0.574    -0.285 </span>
<span class="co">## qsec             0.419      0.219     0.091 </span>
<span class="co">## -------------------------------------------</span></code></pre>
</div>
</div>
</div>
<div class="section level3">
<h3 id="observed-vs-predicted-plot">Observed vs Predicted Plot<a class="anchor" aria-label="anchor" href="#observed-vs-predicted-plot"></a>
</h3>
<p>Plot of observed vs fitted values to assess the fit of the model.
Ideally, all your points should be close to a regressed diagonal line.
Draw such a diagonal line within your graph and check out where the
points lie. If your model had a high R Square, all the points would be
close to this diagonal line. The lower the R Square, the weaker the
Goodness of fit of your model, the more foggy or dispersed your points
are from this diagonal line.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">disp</span> <span class="op">+</span> <span class="va">hp</span> <span class="op">+</span> <span class="va">wt</span> <span class="op">+</span> <span class="va">qsec</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span>
<span class="fu"><a href="../reference/ols_plot_obs_fit.html">ols_plot_obs_fit</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></code></pre></div>
<p><img src="regression_diagnostics_files/figure-html/obspred-1.png" width="480" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="lack-of-fit-f-test">Lack of Fit F Test<a class="anchor" aria-label="anchor" href="#lack-of-fit-f-test"></a>
</h3>
<p>Assess how much of the error in prediction is due to lack of model
fit. The residual sum of squares resulting from a regression can be
decomposed into 2 components:</p>
<ul>
<li>Due to lack of fit</li>
<li>Due to random variation</li>
</ul>
<p>If most of the error is due to lack of fit and not just random error,
the model should be discarded and a new model must be built. The lack of
fit F test works only with simple linear regression. Moreover, it is
important that the data contains repeat observations i.e. replicates for
at least one of the values of the predictor x. This test generally only
applies to datasets with plenty of replicates.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">disp</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span>
<span class="fu"><a href="../reference/ols_pure_error_anova.html">ols_pure_error_anova</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## Lack of Fit F Test </span>
<span class="co">## -----------------</span>
<span class="co">## Response :   mpg </span>
<span class="co">## Predictor:   disp </span>
<span class="co">## </span>
<span class="co">##                       Analysis of Variance Table                       </span>
<span class="co">## ----------------------------------------------------------------------</span>
<span class="co">##                 DF     Sum Sq     Mean Sq     F Value        Pr(&gt;F)    </span>
<span class="co">## ----------------------------------------------------------------------</span>
<span class="co">## disp             1    808.8885    808.8885    314.0095    1.934413e-17 </span>
<span class="co">## Residual        30    317.1587    10.57196                             </span>
<span class="co">##  Lack of fit    25    304.2787    12.17115    4.724824      0.04563623 </span>
<span class="co">##  Pure Error      5       12.88       2.576                             </span>
<span class="co">## ----------------------------------------------------------------------</span></code></pre>
</div>
<div class="section level3">
<h3 id="diagnostics-panel">Diagnostics Panel<a class="anchor" aria-label="anchor" href="#diagnostics-panel"></a>
</h3>
<p>Panel of plots for regression diagnostics</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">disp</span> <span class="op">+</span> <span class="va">hp</span> <span class="op">+</span> <span class="va">wt</span> <span class="op">+</span> <span class="va">qsec</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span>
<span class="fu"><a href="../reference/ols_plot_diagnostics.html">ols_plot_diagnostics</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></code></pre></div>
<p><img src="regression_diagnostics_files/figure-html/diagpanel-1.png" width="960" style="display: block; margin: auto;"><img src="regression_diagnostics_files/figure-html/diagpanel-2.png" width="960" style="display: block; margin: auto;"><img src="regression_diagnostics_files/figure-html/diagpanel-3.png" width="960" style="display: block; margin: auto;"><img src="regression_diagnostics_files/figure-html/diagpanel-4.png" width="960" style="display: block; margin: auto;"><img src="regression_diagnostics_files/figure-html/diagpanel-5.png" width="960" style="display: block; margin: auto;"><img src="regression_diagnostics_files/figure-html/diagpanel-6.png" width="960" style="display: block; margin: auto;"><img src="regression_diagnostics_files/figure-html/diagpanel-7.png" width="960" style="display: block; margin: auto;"><img src="regression_diagnostics_files/figure-html/diagpanel-8.png" width="960" style="display: block; margin: auto;"><img src="regression_diagnostics_files/figure-html/diagpanel-9.png" width="960" style="display: block; margin: auto;"><img src="regression_diagnostics_files/figure-html/diagpanel-10.png" width="960" style="display: block; margin: auto;"><img src="regression_diagnostics_files/figure-html/diagpanel-11.png" width="960" style="display: block; margin: auto;"><img src="regression_diagnostics_files/figure-html/diagpanel-12.png" width="960" style="display: block; margin: auto;"><img src="regression_diagnostics_files/figure-html/diagpanel-13.png" width="960" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level2">
<h2 id="variable-contributions">Variable Contributions<a class="anchor" aria-label="anchor" href="#variable-contributions"></a>
</h2>
<div class="section level3">
<h3 id="residual-vs-regressor-plots">Residual vs Regressor Plots<a class="anchor" aria-label="anchor" href="#residual-vs-regressor-plots"></a>
</h3>
<p>Graph to determine whether we should add a new predictor to the model
already containing other predictors. The residuals from the model is
regressed on the new predictor and if the plot shows non random pattern,
you should consider adding the new predictor to the model.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">disp</span> <span class="op">+</span> <span class="va">hp</span> <span class="op">+</span> <span class="va">wt</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span>
<span class="fu"><a href="../reference/ols_plot_resid_regressor.html">ols_plot_resid_regressor</a></span><span class="op">(</span><span class="va">model</span>, <span class="st">'drat'</span><span class="op">)</span></code></pre></div>
<p><img src="regression_diagnostics_files/figure-html/rvsrplot-1.png" width="480" style="display: block; margin: auto;"><img src="regression_diagnostics_files/figure-html/rvsrplot-2.png" width="480" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="added-variable-plot">Added Variable Plot<a class="anchor" aria-label="anchor" href="#added-variable-plot"></a>
</h3>
<p>Added variable plot provides information about the marginal
importance of a predictor variable <span class="math inline">\(X_{k}\)</span>, given the other predictor
variables already in the model. It shows the marginal importance of the
variable in reducing the residual variability.</p>
<p>The added variable plot was introduced by Mosteller and Tukey (1977).
It enables us to visualize the regression coefficient of a new variable
being considered to be included in a model. The plot can be constructed
for each predictor variable.</p>
<p>Let us assume we want to test the effect of adding/removing variable
<em>X</em> from a model. Let the response variable of the model be
<em>Y</em></p>
<p>Steps to construct an added variable plot:</p>
<ul>
<li>Regress <em>Y</em> on all variables other than <em>X</em> and store
the residuals (<em>Y</em> residuals).</li>
<li>Regress <em>X</em> on all the other variables included in the model
(<em>X</em> residuals).</li>
<li>Construct a scatter plot of <em>Y</em> residuals and <em>X</em>
residuals.</li>
</ul>
<p>What do the <em>Y</em> and <em>X</em> residuals represent? The
<em>Y</em> residuals represent the part of <strong>Y</strong> not
explained by all the variables other than X. The <em>X</em> residuals
represent the part of <strong>X</strong> not explained by other
variables. The slope of the line fitted to the points in the added
variable plot is equal to the regression coefficient when
<strong>Y</strong> is regressed on all variables including
<strong>X</strong>.</p>
<p>A strong linear relationship in the added variable plot indicates the
increased importance of the contribution of <strong>X</strong> to the
model already containing the other predictors.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">disp</span> <span class="op">+</span> <span class="va">hp</span> <span class="op">+</span> <span class="va">wt</span> <span class="op">+</span> <span class="va">qsec</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span>
<span class="fu"><a href="../reference/ols_plot_added_variable.html">ols_plot_added_variable</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## `geom_smooth()` using formula = 'y ~ x'</span>
<span class="co">## `geom_smooth()` using formula = 'y ~ x'</span>
<span class="co">## `geom_smooth()` using formula = 'y ~ x'</span>
<span class="co">## `geom_smooth()` using formula = 'y ~ x'</span></code></pre>
<p><img src="regression_diagnostics_files/figure-html/avplot-1.png" width="960" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="residual-plus-component-plot">Residual Plus Component Plot<a class="anchor" aria-label="anchor" href="#residual-plus-component-plot"></a>
</h3>
<p>The residual plus component plot was introduced by Ezekeil (1924). It
was called as Partial Residual Plot by Larsen and McCleary (1972). Hadi
and Chatterjee (2012) called it the residual plus component plot.</p>
<p>Steps to construct the plot:</p>
<ul>
<li>Regress <strong>Y</strong> on all variables including
<strong>X</strong> and store the residuals (<strong>e</strong>).</li>
<li>Multiply <strong>e</strong> with regression coefficient of
<strong>X</strong> (<strong>eX</strong>).</li>
<li>Construct scatter plot of <strong>eX</strong> and
<strong>X</strong>
</li>
</ul>
<p>The residual plus component plot indicates whether any non-linearity
is present in the relationship between <strong>Y</strong> and
<strong>X</strong> and can suggest possible transformations for
linearizing the data.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">disp</span> <span class="op">+</span> <span class="va">hp</span> <span class="op">+</span> <span class="va">wt</span> <span class="op">+</span> <span class="va">qsec</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span>
<span class="fu"><a href="../reference/ols_plot_comp_plus_resid.html">ols_plot_comp_plus_resid</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## `geom_smooth()` using formula = 'y ~ x'</span>
<span class="co">## `geom_smooth()` using formula = 'y ~ x'</span>
<span class="co">## `geom_smooth()` using formula = 'y ~ x'</span>
<span class="co">## `geom_smooth()` using formula = 'y ~ x'</span></code></pre>
<p><img src="regression_diagnostics_files/figure-html/cplusr-1.png" width="960" style="display: block; margin: auto;"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://www.aravindhebbali.com" class="external-link">Aravind Hebbali</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
