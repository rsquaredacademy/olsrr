<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Variable Selection Methods • olsrr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Variable Selection Methods">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="inverse" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">olsrr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html">Home</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-guides" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Guides</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-guides">
<li><a class="dropdown-item" href="../articles/intro.html">Intro</a></li>
    <li><a class="dropdown-item" href="../articles/residual_diagnostics.html">Residual Diagnostics</a></li>
    <li><a class="dropdown-item" href="../articles/influence_measures.html">Measures of Influence</a></li>
    <li><a class="dropdown-item" href="../articles/heteroskedasticity.html">Heteroskedasticity</a></li>
    <li><a class="dropdown-item" href="../articles/regression_diagnostics.html">Collinearity Diagnostics</a></li>
    <li><a class="dropdown-item" href="../articles/variable_selection.html">Variable Selection</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-reference" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Reference</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-reference">
<li><a class="dropdown-item" href="../reference/index.html">Functions</a></li>
    <li><a class="dropdown-item" href="../articles/reference-media.html">Media</a></li>
    <li><a class="dropdown-item" href="../news/index.html">News</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rsquaredacademy/olsrr"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Variable Selection Methods</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/rsquaredacademy/olsrr/blob/HEAD/vignettes/variable_selection.Rmd" class="external-link"><code>vignettes/variable_selection.Rmd</code></a></small>
      <div class="d-none name"><code>variable_selection.Rmd</code></div>
    </div>

    
    
<style type="text/css">
#best-subset-regression pre { /* Code block */
  font-size: 10px
}
</style>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Variable selection refers to the process of choosing the most
relevant variables to include in a regression model. They help to
improve model performance and avoid over fitting.</p>
<p>Before we explore stepwise selection methods, let us take a quick
look at all/best subset regression. As they evaluate every possible
variable combination, these methods are computationally intensive and
may crash your system if used with a large set of variables. We have
included them in the package purely for educational purpose.</p>
<div class="section level3">
<h3 id="all-possible-regression">All Possible Regression<a class="anchor" aria-label="anchor" href="#all-possible-regression"></a>
</h3>
<p>All subset regression tests all possible subsets of the set of
potential independent variables. If there are K potential independent
variables (besides the constant), then there are
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mn>2</mn><mi>k</mi></msup><annotation encoding="application/x-tex">2^{k}</annotation></semantics></math>
distinct subsets of them to be tested. For example, if you have 10
candidate independent variables, the number of subsets to be tested is
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mn>2</mn><mn>10</mn></msup><annotation encoding="application/x-tex">2^{10}</annotation></semantics></math>,
which is 1024, and if you have 20 candidate variables, the number is
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mn>2</mn><mn>20</mn></msup><annotation encoding="application/x-tex">2^{20}</annotation></semantics></math>,
which is more than one million.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">disp</span> <span class="op">+</span> <span class="va">hp</span> <span class="op">+</span> <span class="va">wt</span> <span class="op">+</span> <span class="va">qsec</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/ols_step_all_possible.html">ols_step_all_possible</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    Index N      Predictors  R-Square Adj. R-Square Mallow's Cp</span></span>
<span><span class="co">## 3      1 1              wt 0.7528328     0.7445939   12.480939</span></span>
<span><span class="co">## 1      2 1            disp 0.7183433     0.7089548   18.129607</span></span>
<span><span class="co">## 2      3 1              hp 0.6024373     0.5891853   37.112642</span></span>
<span><span class="co">## 4      4 1            qsec 0.1752963     0.1478062  107.069616</span></span>
<span><span class="co">## 8      5 2           hp wt 0.8267855     0.8148396    2.369005</span></span>
<span><span class="co">## 10     6 2         wt qsec 0.8264161     0.8144448    2.429492</span></span>
<span><span class="co">## 6      7 2         disp wt 0.7809306     0.7658223    9.879096</span></span>
<span><span class="co">## 5      8 2         disp hp 0.7482402     0.7308774   15.233115</span></span>
<span><span class="co">## 7      9 2       disp qsec 0.7215598     0.7023571   19.602810</span></span>
<span><span class="co">## 9     10 2         hp qsec 0.6368769     0.6118339   33.472150</span></span>
<span><span class="co">## 14    11 3      hp wt qsec 0.8347678     0.8170643    3.061665</span></span>
<span><span class="co">## 11    12 3      disp hp wt 0.8268361     0.8082829    4.360702</span></span>
<span><span class="co">## 13    13 3    disp wt qsec 0.8264170     0.8078189    4.429343</span></span>
<span><span class="co">## 12    14 3    disp hp qsec 0.7541953     0.7278591   16.257790</span></span>
<span><span class="co">## 15    15 4 disp hp wt qsec 0.8351443     0.8107212    5.000000</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="best-subset-regression">Best Subset Regression<a class="anchor" aria-label="anchor" href="#best-subset-regression"></a>
</h3>
<p>Select the subset of predictors that do the best at meeting some
well-defined objective criterion, such as having the largest R2 value or
the smallest MSE, Mallow’s Cp or AIC.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">disp</span> <span class="op">+</span> <span class="va">hp</span> <span class="op">+</span> <span class="va">wt</span> <span class="op">+</span> <span class="va">qsec</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/ols_step_best_subset.html">ols_step_best_subset</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    Best Subsets Regression    </span></span>
<span><span class="co">## ------------------------------</span></span>
<span><span class="co">## Model Index    Predictors</span></span>
<span><span class="co">## ------------------------------</span></span>
<span><span class="co">##      1         wt              </span></span>
<span><span class="co">##      2         hp wt           </span></span>
<span><span class="co">##      3         hp wt qsec      </span></span>
<span><span class="co">##      4         disp hp wt qsec </span></span>
<span><span class="co">## ------------------------------</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                                                    Subsets Regression Summary                                                    </span></span>
<span><span class="co">## ---------------------------------------------------------------------------------------------------------------------------------</span></span>
<span><span class="co">##                        Adj.        Pred                                                                                           </span></span>
<span><span class="co">## Model    R-Square    R-Square    R-Square     C(p)        AIC        SBIC        SBC         MSEP       FPE       HSP       APC  </span></span>
<span><span class="co">## ---------------------------------------------------------------------------------------------------------------------------------</span></span>
<span><span class="co">##   1        0.7528      0.7446      0.7087    12.4809    166.0294    74.2916    170.4266    296.9167    9.8572    0.3199    0.2801 </span></span>
<span><span class="co">##   2        0.8268      0.8148      0.7811     2.3690    156.6523    66.5755    162.5153    215.5104    7.3563    0.2402    0.2091 </span></span>
<span><span class="co">##   3        0.8348      0.8171       0.782     3.0617    157.1426    67.7238    164.4713    213.1929    7.4756    0.2461    0.2124 </span></span>
<span><span class="co">##   4        0.8351      0.8107       0.771     5.0000    159.0696    70.0408    167.8640    220.8882    7.9497    0.2644    0.2259 </span></span>
<span><span class="co">## ---------------------------------------------------------------------------------------------------------------------------------</span></span>
<span><span class="co">## AIC: Akaike Information Criteria </span></span>
<span><span class="co">##  SBIC: Sawa's Bayesian Information Criteria </span></span>
<span><span class="co">##  SBC: Schwarz Bayesian Criteria </span></span>
<span><span class="co">##  MSEP: Estimated error of prediction, assuming multivariate normality </span></span>
<span><span class="co">##  FPE: Final Prediction Error </span></span>
<span><span class="co">##  HSP: Hocking's Sp </span></span>
<span><span class="co">##  APC: Amemiya Prediction Criteria</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="stepwise-selection">Stepwise Selection<a class="anchor" aria-label="anchor" href="#stepwise-selection"></a>
</h2>
<p>Stepwise regression is a method of fitting regression models that
involves the iterative selection of independent variables to use in a
model. It can be achieved through forward selection, backward
elimination, or a combination of both methods. The forward selection
approach starts with no variables and adds each new variable
incrementally, testing for statistical significance, while the backward
elimination method begins with a full model and then removes the least
statistically significant variables one at a time.</p>
<div class="section level3">
<h3 id="model">Model<a class="anchor" aria-label="anchor" href="#model"></a>
</h3>
<p>We will use the below model throughout this article except in the
case of hierarchical selection. You can learn more about the data <a href="https://olsrr.rsquaredacademy.com/reference/surgical">here</a>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">surgical</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Call:</span></span>
<span><span class="co">## lm(formula = y ~ ., data = surgical)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Residuals:</span></span>
<span><span class="co">##     Min      1Q  Median      3Q     Max </span></span>
<span><span class="co">## -285.36 -132.75  -10.00   89.48  790.12 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Coefficients:</span></span>
<span><span class="co">##              Estimate Std. Error t value Pr(&gt;|t|)    </span></span>
<span><span class="co">## (Intercept) -1148.823    242.328  -4.741 2.17e-05 ***</span></span>
<span><span class="co">## bcs            62.390     24.470   2.550 0.014258 *  </span></span>
<span><span class="co">## pindex          8.973      1.874   4.788 1.86e-05 ***</span></span>
<span><span class="co">## enzyme_test     9.888      1.742   5.677 9.39e-07 ***</span></span>
<span><span class="co">## liver_test     50.413     44.959   1.121 0.268109    </span></span>
<span><span class="co">## age            -0.951      2.649  -0.359 0.721231    </span></span>
<span><span class="co">## gender         15.874     58.475   0.271 0.787269    </span></span>
<span><span class="co">## alc_mod         7.713     64.956   0.119 0.906007    </span></span>
<span><span class="co">## alc_heavy     320.697     85.070   3.770 0.000474 ***</span></span>
<span><span class="co">## ---</span></span>
<span><span class="co">## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Residual standard error: 201.4 on 45 degrees of freedom</span></span>
<span><span class="co">## Multiple R-squared:  0.7818, Adjusted R-squared:  0.7431 </span></span>
<span><span class="co">## F-statistic: 20.16 on 8 and 45 DF,  p-value: 1.607e-12</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="model-specification">Model specification<a class="anchor" aria-label="anchor" href="#model-specification"></a>
</h3>
<p>Irrespective of the stepwise method being used, we have to specify
the full model i.e. all the variabels/predictors under consideration as
<code>olsrr</code> extracts the candidate variables for
selection/elimination from the model specified.</p>
<div class="section level5">
<h5 id="forward-selection">Forward selection<a class="anchor" aria-label="anchor" href="#forward-selection"></a>
</h5>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># stepwise forward regression</span></span>
<span><span class="fu"><a href="../reference/ols_step_forward_p.html">ols_step_forward_p</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                               Stepwise Summary                              </span></span>
<span><span class="co">## --------------------------------------------------------------------------</span></span>
<span><span class="co">## Step    Variable         AIC        SBC       SBIC        R2       Adj. R2 </span></span>
<span><span class="co">## --------------------------------------------------------------------------</span></span>
<span><span class="co">##  0      Base Model     802.606    806.584    646.794    0.00000    0.00000 </span></span>
<span><span class="co">##  1      liver_test     771.875    777.842    616.009    0.45454    0.44405 </span></span>
<span><span class="co">##  2      alc_heavy      761.439    769.395    605.506    0.56674    0.54975 </span></span>
<span><span class="co">##  3      enzyme_test    750.509    760.454    595.297    0.65900    0.63854 </span></span>
<span><span class="co">##  4      pindex         735.715    747.649    582.943    0.75015    0.72975 </span></span>
<span><span class="co">##  5      bcs            730.620    744.543    579.638    0.78091    0.75808 </span></span>
<span><span class="co">## --------------------------------------------------------------------------</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Final Model Output </span></span>
<span><span class="co">## ------------------</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                            Model Summary                            </span></span>
<span><span class="co">## -------------------------------------------------------------------</span></span>
<span><span class="co">## R                         0.884       RMSE                 184.276 </span></span>
<span><span class="co">## R-Squared                 0.781       MSE                33957.712 </span></span>
<span><span class="co">## Adj. R-Squared            0.758       Coef. Var             27.839 </span></span>
<span><span class="co">## Pred R-Squared            0.700       AIC                  730.620 </span></span>
<span><span class="co">## MAE                     137.656       SBC                  744.543 </span></span>
<span><span class="co">## -------------------------------------------------------------------</span></span>
<span><span class="co">##  RMSE: Root Mean Square Error </span></span>
<span><span class="co">##  MSE: Mean Square Error </span></span>
<span><span class="co">##  MAE: Mean Absolute Error </span></span>
<span><span class="co">##  AIC: Akaike Information Criteria </span></span>
<span><span class="co">##  SBC: Schwarz Bayesian Criteria </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                                  ANOVA                                  </span></span>
<span><span class="co">## -----------------------------------------------------------------------</span></span>
<span><span class="co">##                    Sum of                                              </span></span>
<span><span class="co">##                   Squares        DF    Mean Square      F         Sig. </span></span>
<span><span class="co">## -----------------------------------------------------------------------</span></span>
<span><span class="co">## Regression    6535804.090         5    1307160.818    34.217    0.0000 </span></span>
<span><span class="co">## Residual      1833716.447        48      38202.426                     </span></span>
<span><span class="co">## Total         8369520.537        53                                    </span></span>
<span><span class="co">## -----------------------------------------------------------------------</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                                       Parameter Estimates                                        </span></span>
<span><span class="co">## ------------------------------------------------------------------------------------------------</span></span>
<span><span class="co">##       model         Beta    Std. Error    Std. Beta      t        Sig         lower       upper </span></span>
<span><span class="co">## ------------------------------------------------------------------------------------------------</span></span>
<span><span class="co">## (Intercept)    -1178.330       208.682                 -5.647    0.000    -1597.914    -758.746 </span></span>
<span><span class="co">##  liver_test       58.064        40.144        0.156     1.446    0.155      -22.652     138.779 </span></span>
<span><span class="co">##   alc_heavy      317.848        71.634        0.314     4.437    0.000      173.818     461.878 </span></span>
<span><span class="co">## enzyme_test        9.748         1.656        0.521     5.887    0.000        6.419      13.077 </span></span>
<span><span class="co">##      pindex        8.924         1.808        0.380     4.935    0.000        5.288      12.559 </span></span>
<span><span class="co">##         bcs       59.864        23.060        0.241     2.596    0.012       13.498     106.230 </span></span>
<span><span class="co">## ------------------------------------------------------------------------------------------------</span></span></code></pre>
</div>
<div class="section level5">
<h5 id="backward-elimination">Backward elimination<a class="anchor" aria-label="anchor" href="#backward-elimination"></a>
</h5>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># stepwise backward regression</span></span>
<span><span class="fu"><a href="../reference/ols_step_backward_p.html">ols_step_backward_p</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                              Stepwise Summary                              </span></span>
<span><span class="co">## -------------------------------------------------------------------------</span></span>
<span><span class="co">## Step    Variable        AIC        SBC       SBIC        R2       Adj. R2 </span></span>
<span><span class="co">## -------------------------------------------------------------------------</span></span>
<span><span class="co">##  0      Full Model    736.390    756.280    586.665    0.78184    0.74305 </span></span>
<span><span class="co">##  1      alc_mod       734.407    752.308    584.276    0.78177    0.74856 </span></span>
<span><span class="co">##  2      gender        732.494    748.406    581.938    0.78142    0.75351 </span></span>
<span><span class="co">##  3      age           730.620    744.543    579.638    0.78091    0.75808 </span></span>
<span><span class="co">## -------------------------------------------------------------------------</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Final Model Output </span></span>
<span><span class="co">## ------------------</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                            Model Summary                            </span></span>
<span><span class="co">## -------------------------------------------------------------------</span></span>
<span><span class="co">## R                         0.884       RMSE                 184.276 </span></span>
<span><span class="co">## R-Squared                 0.781       MSE                33957.712 </span></span>
<span><span class="co">## Adj. R-Squared            0.758       Coef. Var             27.839 </span></span>
<span><span class="co">## Pred R-Squared            0.700       AIC                  730.620 </span></span>
<span><span class="co">## MAE                     137.656       SBC                  744.543 </span></span>
<span><span class="co">## -------------------------------------------------------------------</span></span>
<span><span class="co">##  RMSE: Root Mean Square Error </span></span>
<span><span class="co">##  MSE: Mean Square Error </span></span>
<span><span class="co">##  MAE: Mean Absolute Error </span></span>
<span><span class="co">##  AIC: Akaike Information Criteria </span></span>
<span><span class="co">##  SBC: Schwarz Bayesian Criteria </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                                  ANOVA                                  </span></span>
<span><span class="co">## -----------------------------------------------------------------------</span></span>
<span><span class="co">##                    Sum of                                              </span></span>
<span><span class="co">##                   Squares        DF    Mean Square      F         Sig. </span></span>
<span><span class="co">## -----------------------------------------------------------------------</span></span>
<span><span class="co">## Regression    6535804.090         5    1307160.818    34.217    0.0000 </span></span>
<span><span class="co">## Residual      1833716.447        48      38202.426                     </span></span>
<span><span class="co">## Total         8369520.537        53                                    </span></span>
<span><span class="co">## -----------------------------------------------------------------------</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                                       Parameter Estimates                                        </span></span>
<span><span class="co">## ------------------------------------------------------------------------------------------------</span></span>
<span><span class="co">##       model         Beta    Std. Error    Std. Beta      t        Sig         lower       upper </span></span>
<span><span class="co">## ------------------------------------------------------------------------------------------------</span></span>
<span><span class="co">## (Intercept)    -1178.330       208.682                 -5.647    0.000    -1597.914    -758.746 </span></span>
<span><span class="co">##         bcs       59.864        23.060        0.241     2.596    0.012       13.498     106.230 </span></span>
<span><span class="co">##      pindex        8.924         1.808        0.380     4.935    0.000        5.288      12.559 </span></span>
<span><span class="co">## enzyme_test        9.748         1.656        0.521     5.887    0.000        6.419      13.077 </span></span>
<span><span class="co">##  liver_test       58.064        40.144        0.156     1.446    0.155      -22.652     138.779 </span></span>
<span><span class="co">##   alc_heavy      317.848        71.634        0.314     4.437    0.000      173.818     461.878 </span></span>
<span><span class="co">## ------------------------------------------------------------------------------------------------</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="criteria">Criteria<a class="anchor" aria-label="anchor" href="#criteria"></a>
</h3>
<p>The criteria for selecting variables may be one of the following:</p>
<ul>
<li>p value</li>
<li>akaike information criterion (aic)</li>
<li>schwarz bayesian criterion (sbc)</li>
<li>sawa bayesian criterion (sbic)</li>
<li>r-square</li>
<li>adjusted r-square</li>
</ul>
</div>
<div class="section level3">
<h3 id="includeexclude-variables">Include/exclude variables<a class="anchor" aria-label="anchor" href="#includeexclude-variables"></a>
</h3>
<p>We can force variables to be included or excluded from the model at
all stages of variable selection. The variables may be specified either
by name or position in the model specified.</p>
<div class="section level5">
<h5 id="by-name">By name<a class="anchor" aria-label="anchor" href="#by-name"></a>
</h5>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ols_step_forward_p.html">ols_step_forward_p</a></span><span class="op">(</span><span class="va">model</span>, include <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"alc_mod"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                               Stepwise Summary                               </span></span>
<span><span class="co">## ---------------------------------------------------------------------------</span></span>
<span><span class="co">## Step    Variable         AIC        SBC       SBIC        R2       Adj. R2  </span></span>
<span><span class="co">## ---------------------------------------------------------------------------</span></span>
<span><span class="co">##  0      Base Model     804.340    812.295    645.675    0.04110     0.00350 </span></span>
<span><span class="co">##  1      age            803.834    809.801    646.572    0.01420    -0.00476 </span></span>
<span><span class="co">##  2      alc_mod        804.340    812.295    645.675    0.04110     0.00350 </span></span>
<span><span class="co">##  3      liver_test     772.922    782.867    615.246    0.48357     0.45258 </span></span>
<span><span class="co">##  4      enzyme_test    763.665    775.599    606.382    0.58074     0.54652 </span></span>
<span><span class="co">##  5      alc_heavy      754.332    768.255    598.224    0.66012     0.62471 </span></span>
<span><span class="co">##  6      pindex         739.680    755.592    587.108    0.75031     0.71843 </span></span>
<span><span class="co">## ---------------------------------------------------------------------------</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Final Model Output </span></span>
<span><span class="co">## ------------------</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                            Model Summary                            </span></span>
<span><span class="co">## -------------------------------------------------------------------</span></span>
<span><span class="co">## R                         0.866       RMSE                 196.724 </span></span>
<span><span class="co">## R-Squared                 0.750       MSE                38700.429 </span></span>
<span><span class="co">## Adj. R-Squared            0.718       Coef. Var             30.034 </span></span>
<span><span class="co">## Pred R-Squared            0.649       AIC                  739.680 </span></span>
<span><span class="co">## MAE                     146.418       SBC                  755.592 </span></span>
<span><span class="co">## -------------------------------------------------------------------</span></span>
<span><span class="co">##  RMSE: Root Mean Square Error </span></span>
<span><span class="co">##  MSE: Mean Square Error </span></span>
<span><span class="co">##  MAE: Mean Absolute Error </span></span>
<span><span class="co">##  AIC: Akaike Information Criteria </span></span>
<span><span class="co">##  SBC: Schwarz Bayesian Criteria </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                                  ANOVA                                  </span></span>
<span><span class="co">## -----------------------------------------------------------------------</span></span>
<span><span class="co">##                    Sum of                                              </span></span>
<span><span class="co">##                   Squares        DF    Mean Square      F         Sig. </span></span>
<span><span class="co">## -----------------------------------------------------------------------</span></span>
<span><span class="co">## Regression    6279697.346         6    1046616.224    23.538    0.0000 </span></span>
<span><span class="co">## Residual      2089823.191        47      44464.323                     </span></span>
<span><span class="co">## Total         8369520.537        53                                    </span></span>
<span><span class="co">## -----------------------------------------------------------------------</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                                       Parameter Estimates                                       </span></span>
<span><span class="co">## -----------------------------------------------------------------------------------------------</span></span>
<span><span class="co">##       model        Beta    Std. Error    Std. Beta      t        Sig         lower       upper </span></span>
<span><span class="co">## -----------------------------------------------------------------------------------------------</span></span>
<span><span class="co">## (Intercept)    -814.092       213.222                 -3.818    0.000    -1243.041    -385.144 </span></span>
<span><span class="co">##         age       0.458         2.706        0.013     0.169    0.866       -4.985       5.902 </span></span>
<span><span class="co">##     alc_mod       1.088        67.941        0.001     0.016    0.987     -135.591     137.768 </span></span>
<span><span class="co">##  liver_test     126.675        33.832        0.341     3.744    0.000       58.613     194.737 </span></span>
<span><span class="co">## enzyme_test       7.523         1.543        0.402     4.874    0.000        4.418      10.628 </span></span>
<span><span class="co">##   alc_heavy     361.751        87.140        0.357     4.151    0.000      186.448     537.053 </span></span>
<span><span class="co">##      pindex       7.862         1.908        0.334     4.120    0.000        4.023      11.700 </span></span>
<span><span class="co">## -----------------------------------------------------------------------------------------------</span></span></code></pre>
</div>
<div class="section level5">
<h5 id="by-index">By index<a class="anchor" aria-label="anchor" href="#by-index"></a>
</h5>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ols_step_forward_p.html">ols_step_forward_p</a></span><span class="op">(</span><span class="va">model</span>, include <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">7</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                               Stepwise Summary                               </span></span>
<span><span class="co">## ---------------------------------------------------------------------------</span></span>
<span><span class="co">## Step    Variable         AIC        SBC       SBIC        R2       Adj. R2  </span></span>
<span><span class="co">## ---------------------------------------------------------------------------</span></span>
<span><span class="co">##  0      Base Model     804.340    812.295    645.675    0.04110     0.00350 </span></span>
<span><span class="co">##  1      age            803.834    809.801    646.572    0.01420    -0.00476 </span></span>
<span><span class="co">##  2      alc_mod        804.340    812.295    645.675    0.04110     0.00350 </span></span>
<span><span class="co">##  3      liver_test     772.922    782.867    615.246    0.48357     0.45258 </span></span>
<span><span class="co">##  4      enzyme_test    763.665    775.599    606.382    0.58074     0.54652 </span></span>
<span><span class="co">##  5      alc_heavy      754.332    768.255    598.224    0.66012     0.62471 </span></span>
<span><span class="co">##  6      pindex         739.680    755.592    587.108    0.75031     0.71843 </span></span>
<span><span class="co">## ---------------------------------------------------------------------------</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Final Model Output </span></span>
<span><span class="co">## ------------------</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                            Model Summary                            </span></span>
<span><span class="co">## -------------------------------------------------------------------</span></span>
<span><span class="co">## R                         0.866       RMSE                 196.724 </span></span>
<span><span class="co">## R-Squared                 0.750       MSE                38700.429 </span></span>
<span><span class="co">## Adj. R-Squared            0.718       Coef. Var             30.034 </span></span>
<span><span class="co">## Pred R-Squared            0.649       AIC                  739.680 </span></span>
<span><span class="co">## MAE                     146.418       SBC                  755.592 </span></span>
<span><span class="co">## -------------------------------------------------------------------</span></span>
<span><span class="co">##  RMSE: Root Mean Square Error </span></span>
<span><span class="co">##  MSE: Mean Square Error </span></span>
<span><span class="co">##  MAE: Mean Absolute Error </span></span>
<span><span class="co">##  AIC: Akaike Information Criteria </span></span>
<span><span class="co">##  SBC: Schwarz Bayesian Criteria </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                                  ANOVA                                  </span></span>
<span><span class="co">## -----------------------------------------------------------------------</span></span>
<span><span class="co">##                    Sum of                                              </span></span>
<span><span class="co">##                   Squares        DF    Mean Square      F         Sig. </span></span>
<span><span class="co">## -----------------------------------------------------------------------</span></span>
<span><span class="co">## Regression    6279697.346         6    1046616.224    23.538    0.0000 </span></span>
<span><span class="co">## Residual      2089823.191        47      44464.323                     </span></span>
<span><span class="co">## Total         8369520.537        53                                    </span></span>
<span><span class="co">## -----------------------------------------------------------------------</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                                       Parameter Estimates                                       </span></span>
<span><span class="co">## -----------------------------------------------------------------------------------------------</span></span>
<span><span class="co">##       model        Beta    Std. Error    Std. Beta      t        Sig         lower       upper </span></span>
<span><span class="co">## -----------------------------------------------------------------------------------------------</span></span>
<span><span class="co">## (Intercept)    -814.092       213.222                 -3.818    0.000    -1243.041    -385.144 </span></span>
<span><span class="co">##         age       0.458         2.706        0.013     0.169    0.866       -4.985       5.902 </span></span>
<span><span class="co">##     alc_mod       1.088        67.941        0.001     0.016    0.987     -135.591     137.768 </span></span>
<span><span class="co">##  liver_test     126.675        33.832        0.341     3.744    0.000       58.613     194.737 </span></span>
<span><span class="co">## enzyme_test       7.523         1.543        0.402     4.874    0.000        4.418      10.628 </span></span>
<span><span class="co">##   alc_heavy     361.751        87.140        0.357     4.151    0.000      186.448     537.053 </span></span>
<span><span class="co">##      pindex       7.862         1.908        0.334     4.120    0.000        4.023      11.700 </span></span>
<span><span class="co">## -----------------------------------------------------------------------------------------------</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="standardized-output">Standardized output<a class="anchor" aria-label="anchor" href="#standardized-output"></a>
</h3>
<p>All stepwise selection methods display standard output which
includes:</p>
<ul>
<li>selection summary</li>
<li>model summary</li>
<li>ANOVA</li>
<li>parameter estimates</li>
</ul>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># adjusted r-square </span></span>
<span><span class="fu"><a href="../reference/ols_step_forward_adj_r2.html">ols_step_forward_adj_r2</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                               Stepwise Summary                              </span></span>
<span><span class="co">## --------------------------------------------------------------------------</span></span>
<span><span class="co">## Step    Variable         AIC        SBC       SBIC        R2       Adj. R2 </span></span>
<span><span class="co">## --------------------------------------------------------------------------</span></span>
<span><span class="co">##  0      Base Model     802.606    806.584    646.794    0.00000    0.00000 </span></span>
<span><span class="co">##  1      liver_test     771.875    777.842    616.009    0.45454    0.44405 </span></span>
<span><span class="co">##  2      alc_heavy      761.439    769.395    605.506    0.56674    0.54975 </span></span>
<span><span class="co">##  3      enzyme_test    750.509    760.454    595.297    0.65900    0.63854 </span></span>
<span><span class="co">##  4      pindex         735.715    747.649    582.943    0.75015    0.72975 </span></span>
<span><span class="co">##  5      bcs            730.620    744.543    579.638    0.78091    0.75808 </span></span>
<span><span class="co">## --------------------------------------------------------------------------</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Final Model Output </span></span>
<span><span class="co">## ------------------</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                            Model Summary                            </span></span>
<span><span class="co">## -------------------------------------------------------------------</span></span>
<span><span class="co">## R                         0.884       RMSE                 184.276 </span></span>
<span><span class="co">## R-Squared                 0.781       MSE                33957.712 </span></span>
<span><span class="co">## Adj. R-Squared            0.758       Coef. Var             27.839 </span></span>
<span><span class="co">## Pred R-Squared            0.700       AIC                  730.620 </span></span>
<span><span class="co">## MAE                     137.656       SBC                  744.543 </span></span>
<span><span class="co">## -------------------------------------------------------------------</span></span>
<span><span class="co">##  RMSE: Root Mean Square Error </span></span>
<span><span class="co">##  MSE: Mean Square Error </span></span>
<span><span class="co">##  MAE: Mean Absolute Error </span></span>
<span><span class="co">##  AIC: Akaike Information Criteria </span></span>
<span><span class="co">##  SBC: Schwarz Bayesian Criteria </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                                  ANOVA                                  </span></span>
<span><span class="co">## -----------------------------------------------------------------------</span></span>
<span><span class="co">##                    Sum of                                              </span></span>
<span><span class="co">##                   Squares        DF    Mean Square      F         Sig. </span></span>
<span><span class="co">## -----------------------------------------------------------------------</span></span>
<span><span class="co">## Regression    6535804.090         5    1307160.818    34.217    0.0000 </span></span>
<span><span class="co">## Residual      1833716.447        48      38202.426                     </span></span>
<span><span class="co">## Total         8369520.537        53                                    </span></span>
<span><span class="co">## -----------------------------------------------------------------------</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                                       Parameter Estimates                                        </span></span>
<span><span class="co">## ------------------------------------------------------------------------------------------------</span></span>
<span><span class="co">##       model         Beta    Std. Error    Std. Beta      t        Sig         lower       upper </span></span>
<span><span class="co">## ------------------------------------------------------------------------------------------------</span></span>
<span><span class="co">## (Intercept)    -1178.330       208.682                 -5.647    0.000    -1597.914    -758.746 </span></span>
<span><span class="co">##  liver_test       58.064        40.144        0.156     1.446    0.155      -22.652     138.779 </span></span>
<span><span class="co">##   alc_heavy      317.848        71.634        0.314     4.437    0.000      173.818     461.878 </span></span>
<span><span class="co">## enzyme_test        9.748         1.656        0.521     5.887    0.000        6.419      13.077 </span></span>
<span><span class="co">##      pindex        8.924         1.808        0.380     4.935    0.000        5.288      12.559 </span></span>
<span><span class="co">##         bcs       59.864        23.060        0.241     2.596    0.012       13.498     106.230 </span></span>
<span><span class="co">## ------------------------------------------------------------------------------------------------</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="visualization">Visualization<a class="anchor" aria-label="anchor" href="#visualization"></a>
</h3>
<p>Use the <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> method to visualize variable selection.
It will display how the variable selection criteria changes at each step
of the selection process along with the variable selected.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># adjusted r-square </span></span>
<span><span class="va">k</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ols_step_forward_adj_r2.html">ols_step_forward_adj_r2</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">k</span><span class="op">)</span></span></code></pre></div>
<p><img src="variable_selection_files/figure-html/visualize-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="verbose-output">Verbose output<a class="anchor" aria-label="anchor" href="#verbose-output"></a>
</h3>
<p>To view the detailed regression output at each stage of variable
selection/elimination, set <code>details</code> to <code>TRUE</code>. It
will display the following information at each step:</p>
<ul>
<li>step number</li>
<li>variable selected/eliminated</li>
<li>model</li>
<li>value of the criteria at that stage</li>
</ul>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># adjusted r-square </span></span>
<span><span class="fu"><a href="../reference/ols_step_forward_adj_r2.html">ols_step_forward_adj_r2</a></span><span class="op">(</span><span class="va">model</span>, details <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Forward Selection Method </span></span>
<span><span class="co">## ------------------------</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Candidate Terms: </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1. bcs </span></span>
<span><span class="co">## 2. pindex </span></span>
<span><span class="co">## 3. enzyme_test </span></span>
<span><span class="co">## 4. liver_test </span></span>
<span><span class="co">## 5. age </span></span>
<span><span class="co">## 6. gender </span></span>
<span><span class="co">## 7. alc_mod </span></span>
<span><span class="co">## 8. alc_heavy </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Step     =&gt; 0 </span></span>
<span><span class="co">## Model    =&gt; y ~ 1 </span></span>
<span><span class="co">## Adj. R2  =&gt; 0 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Initiating stepwise selection... </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                        Table: Adding New Variables                        </span></span>
<span><span class="co">## -------------------------------------------------------------------------</span></span>
<span><span class="co">## Predictor      DF      AIC        SBC       SBIC        R2       Adj. R2  </span></span>
<span><span class="co">## -------------------------------------------------------------------------</span></span>
<span><span class="co">## liver_test      1    771.875    777.842    616.009    0.45454     0.44405 </span></span>
<span><span class="co">## enzyme_test     1    782.629    788.596    626.220    0.33435     0.32154 </span></span>
<span><span class="co">## pindex          1    794.100    800.067    637.196    0.17680     0.16097 </span></span>
<span><span class="co">## alc_heavy       1    794.301    800.268    637.389    0.17373     0.15784 </span></span>
<span><span class="co">## bcs             1    797.697    803.664    640.655    0.12010     0.10318 </span></span>
<span><span class="co">## alc_mod         1    802.828    808.795    645.601    0.03239     0.01378 </span></span>
<span><span class="co">## gender          1    802.956    808.923    645.725    0.03009     0.01143 </span></span>
<span><span class="co">## age             1    803.834    809.801    646.572    0.01420    -0.00476 </span></span>
<span><span class="co">## -------------------------------------------------------------------------</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Step     =&gt; 1 </span></span>
<span><span class="co">## Added    =&gt; liver_test </span></span>
<span><span class="co">## Model    =&gt; y ~ liver_test </span></span>
<span><span class="co">## Adj. R2  =&gt; 0.44405 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                       Table: Adding New Variables                        </span></span>
<span><span class="co">## ------------------------------------------------------------------------</span></span>
<span><span class="co">## Predictor      DF      AIC        SBC       SBIC        R2       Adj. R2 </span></span>
<span><span class="co">## ------------------------------------------------------------------------</span></span>
<span><span class="co">## alc_heavy       1    761.439    769.395    605.506    0.56674    0.54975 </span></span>
<span><span class="co">## enzyme_test     1    762.077    770.033    606.090    0.56159    0.54440 </span></span>
<span><span class="co">## pindex          1    770.387    778.343    613.737    0.48866    0.46861 </span></span>
<span><span class="co">## alc_mod         1    771.141    779.097    614.435    0.48147    0.46113 </span></span>
<span><span class="co">## gender          1    773.802    781.758    616.901    0.45528    0.43391 </span></span>
<span><span class="co">## age             1    773.831    781.787    616.928    0.45498    0.43361 </span></span>
<span><span class="co">## bcs             1    773.867    781.823    616.961    0.45462    0.43323 </span></span>
<span><span class="co">## ------------------------------------------------------------------------</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Step     =&gt; 2 </span></span>
<span><span class="co">## Added    =&gt; alc_heavy </span></span>
<span><span class="co">## Model    =&gt; y ~ liver_test + alc_heavy </span></span>
<span><span class="co">## Adj. R2  =&gt; 0.54975 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                       Table: Adding New Variables                        </span></span>
<span><span class="co">## ------------------------------------------------------------------------</span></span>
<span><span class="co">## Predictor      DF      AIC        SBC       SBIC        R2       Adj. R2 </span></span>
<span><span class="co">## ------------------------------------------------------------------------</span></span>
<span><span class="co">## enzyme_test     1    750.509    760.454    595.297    0.65900    0.63854 </span></span>
<span><span class="co">## pindex          1    756.125    766.070    600.225    0.62163    0.59892 </span></span>
<span><span class="co">## bcs             1    763.063    773.008    606.379    0.56975    0.54394 </span></span>
<span><span class="co">## age             1    763.110    773.055    606.421    0.56938    0.54354 </span></span>
<span><span class="co">## alc_mod         1    763.428    773.373    606.704    0.56683    0.54084 </span></span>
<span><span class="co">## gender          1    763.433    773.378    606.709    0.56679    0.54080 </span></span>
<span><span class="co">## ------------------------------------------------------------------------</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Step     =&gt; 3 </span></span>
<span><span class="co">## Added    =&gt; enzyme_test </span></span>
<span><span class="co">## Model    =&gt; y ~ liver_test + alc_heavy + enzyme_test </span></span>
<span><span class="co">## Adj. R2  =&gt; 0.63854 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                      Table: Adding New Variables                       </span></span>
<span><span class="co">## ----------------------------------------------------------------------</span></span>
<span><span class="co">## Predictor    DF      AIC        SBC       SBIC        R2       Adj. R2 </span></span>
<span><span class="co">## ----------------------------------------------------------------------</span></span>
<span><span class="co">## pindex        1    735.715    747.649    582.943    0.75015    0.72975 </span></span>
<span><span class="co">## bcs           1    750.782    762.716    595.377    0.66973    0.64277 </span></span>
<span><span class="co">## alc_mod       1    752.403    764.337    596.743    0.65967    0.63189 </span></span>
<span><span class="co">## age           1    752.416    764.350    596.755    0.65959    0.63180 </span></span>
<span><span class="co">## gender        1    752.509    764.443    596.833    0.65900    0.63116 </span></span>
<span><span class="co">## ----------------------------------------------------------------------</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Step     =&gt; 4 </span></span>
<span><span class="co">## Added    =&gt; pindex </span></span>
<span><span class="co">## Model    =&gt; y ~ liver_test + alc_heavy + enzyme_test + pindex </span></span>
<span><span class="co">## Adj. R2  =&gt; 0.72975 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                      Table: Adding New Variables                       </span></span>
<span><span class="co">## ----------------------------------------------------------------------</span></span>
<span><span class="co">## Predictor    DF      AIC        SBC       SBIC        R2       Adj. R2 </span></span>
<span><span class="co">## ----------------------------------------------------------------------</span></span>
<span><span class="co">## bcs           1    730.620    744.543    579.638    0.78091    0.75808 </span></span>
<span><span class="co">## age           1    737.680    751.603    585.012    0.75030    0.72429 </span></span>
<span><span class="co">## gender        1    737.712    751.635    585.036    0.75016    0.72413 </span></span>
<span><span class="co">## alc_mod       1    737.713    751.636    585.037    0.75015    0.72413 </span></span>
<span><span class="co">## ----------------------------------------------------------------------</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Step     =&gt; 5 </span></span>
<span><span class="co">## Added    =&gt; bcs </span></span>
<span><span class="co">## Model    =&gt; y ~ liver_test + alc_heavy + enzyme_test + pindex + bcs </span></span>
<span><span class="co">## Adj. R2  =&gt; 0.75808 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                      Table: Adding New Variables                       </span></span>
<span><span class="co">## ----------------------------------------------------------------------</span></span>
<span><span class="co">## Predictor    DF      AIC        SBC       SBIC        R2       Adj. R2 </span></span>
<span><span class="co">## ----------------------------------------------------------------------</span></span>
<span><span class="co">## age           1    732.494    748.406    581.938    0.78142    0.75351 </span></span>
<span><span class="co">## gender        1    732.551    748.463    581.978    0.78119    0.75325 </span></span>
<span><span class="co">## alc_mod       1    732.614    748.526    582.023    0.78093    0.75297 </span></span>
<span><span class="co">## ----------------------------------------------------------------------</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## No more variables to be added.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Variables Selected: </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## =&gt; liver_test </span></span>
<span><span class="co">## =&gt; alc_heavy </span></span>
<span><span class="co">## =&gt; enzyme_test </span></span>
<span><span class="co">## =&gt; pindex </span></span>
<span><span class="co">## =&gt; bcs</span></span></code></pre>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                               Stepwise Summary                              </span></span>
<span><span class="co">## --------------------------------------------------------------------------</span></span>
<span><span class="co">## Step    Variable         AIC        SBC       SBIC        R2       Adj. R2 </span></span>
<span><span class="co">## --------------------------------------------------------------------------</span></span>
<span><span class="co">##  0      Base Model     802.606    806.584    646.794    0.00000    0.00000 </span></span>
<span><span class="co">##  1      liver_test     771.875    777.842    616.009    0.45454    0.44405 </span></span>
<span><span class="co">##  2      alc_heavy      761.439    769.395    605.506    0.56674    0.54975 </span></span>
<span><span class="co">##  3      enzyme_test    750.509    760.454    595.297    0.65900    0.63854 </span></span>
<span><span class="co">##  4      pindex         735.715    747.649    582.943    0.75015    0.72975 </span></span>
<span><span class="co">##  5      bcs            730.620    744.543    579.638    0.78091    0.75808 </span></span>
<span><span class="co">## --------------------------------------------------------------------------</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Final Model Output </span></span>
<span><span class="co">## ------------------</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                            Model Summary                            </span></span>
<span><span class="co">## -------------------------------------------------------------------</span></span>
<span><span class="co">## R                         0.884       RMSE                 184.276 </span></span>
<span><span class="co">## R-Squared                 0.781       MSE                33957.712 </span></span>
<span><span class="co">## Adj. R-Squared            0.758       Coef. Var             27.839 </span></span>
<span><span class="co">## Pred R-Squared            0.700       AIC                  730.620 </span></span>
<span><span class="co">## MAE                     137.656       SBC                  744.543 </span></span>
<span><span class="co">## -------------------------------------------------------------------</span></span>
<span><span class="co">##  RMSE: Root Mean Square Error </span></span>
<span><span class="co">##  MSE: Mean Square Error </span></span>
<span><span class="co">##  MAE: Mean Absolute Error </span></span>
<span><span class="co">##  AIC: Akaike Information Criteria </span></span>
<span><span class="co">##  SBC: Schwarz Bayesian Criteria </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                                  ANOVA                                  </span></span>
<span><span class="co">## -----------------------------------------------------------------------</span></span>
<span><span class="co">##                    Sum of                                              </span></span>
<span><span class="co">##                   Squares        DF    Mean Square      F         Sig. </span></span>
<span><span class="co">## -----------------------------------------------------------------------</span></span>
<span><span class="co">## Regression    6535804.090         5    1307160.818    34.217    0.0000 </span></span>
<span><span class="co">## Residual      1833716.447        48      38202.426                     </span></span>
<span><span class="co">## Total         8369520.537        53                                    </span></span>
<span><span class="co">## -----------------------------------------------------------------------</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                                       Parameter Estimates                                        </span></span>
<span><span class="co">## ------------------------------------------------------------------------------------------------</span></span>
<span><span class="co">##       model         Beta    Std. Error    Std. Beta      t        Sig         lower       upper </span></span>
<span><span class="co">## ------------------------------------------------------------------------------------------------</span></span>
<span><span class="co">## (Intercept)    -1178.330       208.682                 -5.647    0.000    -1597.914    -758.746 </span></span>
<span><span class="co">##  liver_test       58.064        40.144        0.156     1.446    0.155      -22.652     138.779 </span></span>
<span><span class="co">##   alc_heavy      317.848        71.634        0.314     4.437    0.000      173.818     461.878 </span></span>
<span><span class="co">## enzyme_test        9.748         1.656        0.521     5.887    0.000        6.419      13.077 </span></span>
<span><span class="co">##      pindex        8.924         1.808        0.380     4.935    0.000        5.288      12.559 </span></span>
<span><span class="co">##         bcs       59.864        23.060        0.241     2.596    0.012       13.498     106.230 </span></span>
<span><span class="co">## ------------------------------------------------------------------------------------------------</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="progress">Progress<a class="anchor" aria-label="anchor" href="#progress"></a>
</h3>
<p>To view the progress in the variable selection procedure, set
<code>progress</code> to <code>TRUE</code>. It will display the variable
being selected/eliminated at each step until there are no more candidate
variables left.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># adjusted r-square </span></span>
<span><span class="fu"><a href="../reference/ols_step_forward_adj_r2.html">ols_step_forward_adj_r2</a></span><span class="op">(</span><span class="va">model</span>, progress <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Forward Selection Method </span></span>
<span><span class="co">## ------------------------</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Candidate Terms: </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1. bcs </span></span>
<span><span class="co">## 2. pindex </span></span>
<span><span class="co">## 3. enzyme_test </span></span>
<span><span class="co">## 4. liver_test </span></span>
<span><span class="co">## 5. age </span></span>
<span><span class="co">## 6. gender </span></span>
<span><span class="co">## 7. alc_mod </span></span>
<span><span class="co">## 8. alc_heavy </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Variables Entered: </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## =&gt; liver_test </span></span>
<span><span class="co">## =&gt; alc_heavy </span></span>
<span><span class="co">## =&gt; enzyme_test </span></span>
<span><span class="co">## =&gt; pindex </span></span>
<span><span class="co">## =&gt; bcs </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## No more variables to be added.</span></span></code></pre>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                               Stepwise Summary                              </span></span>
<span><span class="co">## --------------------------------------------------------------------------</span></span>
<span><span class="co">## Step    Variable         AIC        SBC       SBIC        R2       Adj. R2 </span></span>
<span><span class="co">## --------------------------------------------------------------------------</span></span>
<span><span class="co">##  0      Base Model     802.606    806.584    646.794    0.00000    0.00000 </span></span>
<span><span class="co">##  1      liver_test     771.875    777.842    616.009    0.45454    0.44405 </span></span>
<span><span class="co">##  2      alc_heavy      761.439    769.395    605.506    0.56674    0.54975 </span></span>
<span><span class="co">##  3      enzyme_test    750.509    760.454    595.297    0.65900    0.63854 </span></span>
<span><span class="co">##  4      pindex         735.715    747.649    582.943    0.75015    0.72975 </span></span>
<span><span class="co">##  5      bcs            730.620    744.543    579.638    0.78091    0.75808 </span></span>
<span><span class="co">## --------------------------------------------------------------------------</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Final Model Output </span></span>
<span><span class="co">## ------------------</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                            Model Summary                            </span></span>
<span><span class="co">## -------------------------------------------------------------------</span></span>
<span><span class="co">## R                         0.884       RMSE                 184.276 </span></span>
<span><span class="co">## R-Squared                 0.781       MSE                33957.712 </span></span>
<span><span class="co">## Adj. R-Squared            0.758       Coef. Var             27.839 </span></span>
<span><span class="co">## Pred R-Squared            0.700       AIC                  730.620 </span></span>
<span><span class="co">## MAE                     137.656       SBC                  744.543 </span></span>
<span><span class="co">## -------------------------------------------------------------------</span></span>
<span><span class="co">##  RMSE: Root Mean Square Error </span></span>
<span><span class="co">##  MSE: Mean Square Error </span></span>
<span><span class="co">##  MAE: Mean Absolute Error </span></span>
<span><span class="co">##  AIC: Akaike Information Criteria </span></span>
<span><span class="co">##  SBC: Schwarz Bayesian Criteria </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                                  ANOVA                                  </span></span>
<span><span class="co">## -----------------------------------------------------------------------</span></span>
<span><span class="co">##                    Sum of                                              </span></span>
<span><span class="co">##                   Squares        DF    Mean Square      F         Sig. </span></span>
<span><span class="co">## -----------------------------------------------------------------------</span></span>
<span><span class="co">## Regression    6535804.090         5    1307160.818    34.217    0.0000 </span></span>
<span><span class="co">## Residual      1833716.447        48      38202.426                     </span></span>
<span><span class="co">## Total         8369520.537        53                                    </span></span>
<span><span class="co">## -----------------------------------------------------------------------</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                                       Parameter Estimates                                        </span></span>
<span><span class="co">## ------------------------------------------------------------------------------------------------</span></span>
<span><span class="co">##       model         Beta    Std. Error    Std. Beta      t        Sig         lower       upper </span></span>
<span><span class="co">## ------------------------------------------------------------------------------------------------</span></span>
<span><span class="co">## (Intercept)    -1178.330       208.682                 -5.647    0.000    -1597.914    -758.746 </span></span>
<span><span class="co">##  liver_test       58.064        40.144        0.156     1.446    0.155      -22.652     138.779 </span></span>
<span><span class="co">##   alc_heavy      317.848        71.634        0.314     4.437    0.000      173.818     461.878 </span></span>
<span><span class="co">## enzyme_test        9.748         1.656        0.521     5.887    0.000        6.419      13.077 </span></span>
<span><span class="co">##      pindex        8.924         1.808        0.380     4.935    0.000        5.288      12.559 </span></span>
<span><span class="co">##         bcs       59.864        23.060        0.241     2.596    0.012       13.498     106.230 </span></span>
<span><span class="co">## ------------------------------------------------------------------------------------------------</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="hierarchical-selection">Hierarchical selection<a class="anchor" aria-label="anchor" href="#hierarchical-selection"></a>
</h3>
<p>When using <code>p</code> values as the criterion for
selecting/eliminating variables, we can enable hierarchical selection.
In this method, the search for the most significant variable is
restricted to the next available variable. In the below example, as
<code>liver_test</code> does not meet the threshold for selection, none
of the variables after <code>liver_test</code> are considered for
further selection i.e. the stepwise selection ends as soon as it comes
across a variable that does not meet the selection threshold. You can
learn more about hierachichal selection <a href="https://www.stata.com/manuals/rstepwise.pdf" class="external-link">here</a>.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># hierarchical selection</span></span>
<span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">bcs</span> <span class="op">+</span> <span class="va">alc_heavy</span> <span class="op">+</span> <span class="va">pindex</span> <span class="op">+</span> <span class="va">enzyme_test</span> <span class="op">+</span> <span class="va">liver_test</span> <span class="op">+</span> <span class="va">age</span> <span class="op">+</span> <span class="va">gender</span> <span class="op">+</span> <span class="va">alc_mod</span>, data <span class="op">=</span> <span class="va">surgical</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/ols_step_forward_p.html">ols_step_forward_p</a></span><span class="op">(</span><span class="va">m</span>, <span class="fl">0.1</span>, hierarchical <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                               Stepwise Summary                              </span></span>
<span><span class="co">## --------------------------------------------------------------------------</span></span>
<span><span class="co">## Step    Variable         AIC        SBC       SBIC        R2       Adj. R2 </span></span>
<span><span class="co">## --------------------------------------------------------------------------</span></span>
<span><span class="co">##  0      Base Model     802.606    806.584    646.794    0.00000    0.00000 </span></span>
<span><span class="co">##  1      bcs            797.697    803.664    640.655    0.12010    0.10318 </span></span>
<span><span class="co">##  2      alc_heavy      791.701    799.657    633.668    0.24119    0.21144 </span></span>
<span><span class="co">##  3      pindex         778.574    788.519    620.390    0.42659    0.39218 </span></span>
<span><span class="co">##  4      enzyme_test    730.924    742.858    579.087    0.77136    0.75269 </span></span>
<span><span class="co">## --------------------------------------------------------------------------</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Final Model Output </span></span>
<span><span class="co">## ------------------</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                            Model Summary                            </span></span>
<span><span class="co">## -------------------------------------------------------------------</span></span>
<span><span class="co">## R                         0.878       RMSE                 188.249 </span></span>
<span><span class="co">## R-Squared                 0.771       MSE                35437.709 </span></span>
<span><span class="co">## Adj. R-Squared            0.753       Coef. Var             28.147 </span></span>
<span><span class="co">## Pred R-Squared            0.695       AIC                  730.924 </span></span>
<span><span class="co">## MAE                     140.619       SBC                  742.858 </span></span>
<span><span class="co">## -------------------------------------------------------------------</span></span>
<span><span class="co">##  RMSE: Root Mean Square Error </span></span>
<span><span class="co">##  MSE: Mean Square Error </span></span>
<span><span class="co">##  MAE: Mean Absolute Error </span></span>
<span><span class="co">##  AIC: Akaike Information Criteria </span></span>
<span><span class="co">##  SBC: Schwarz Bayesian Criteria </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                                  ANOVA                                  </span></span>
<span><span class="co">## -----------------------------------------------------------------------</span></span>
<span><span class="co">##                    Sum of                                              </span></span>
<span><span class="co">##                   Squares        DF    Mean Square      F         Sig. </span></span>
<span><span class="co">## -----------------------------------------------------------------------</span></span>
<span><span class="co">## Regression    6455884.265         4    1613971.066    41.327    0.0000 </span></span>
<span><span class="co">## Residual      1913636.272        49      39053.801                     </span></span>
<span><span class="co">## Total         8369520.537        53                                    </span></span>
<span><span class="co">## -----------------------------------------------------------------------</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##                                       Parameter Estimates                                        </span></span>
<span><span class="co">## ------------------------------------------------------------------------------------------------</span></span>
<span><span class="co">##       model         Beta    Std. Error    Std. Beta      t        Sig         lower       upper </span></span>
<span><span class="co">## ------------------------------------------------------------------------------------------------</span></span>
<span><span class="co">## (Intercept)    -1334.424       180.589                 -7.389    0.000    -1697.332    -971.516 </span></span>
<span><span class="co">##         bcs       81.439        17.781        0.329     4.580    0.000       45.706     117.171 </span></span>
<span><span class="co">##   alc_heavy      312.777        72.341        0.309     4.324    0.000      167.402     458.152 </span></span>
<span><span class="co">##      pindex       10.131         1.622        0.431     6.246    0.000        6.871      13.390 </span></span>
<span><span class="co">## enzyme_test       11.243         1.308        0.601     8.596    0.000        8.614      13.871 </span></span>
<span><span class="co">## ------------------------------------------------------------------------------------------------</span></span></code></pre>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.aravindhebbali.com" class="external-link">Aravind Hebbali</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
